import{a as H,a4 as J,w as _,v as B,f as K,cH as Q,ab as U,aO as Y,x as R,a1 as I,a0 as Z,b5 as $,z as l,n as c,_ as G,cg as aa,a3 as y,a8 as ta,ci as ea,bv as ra}from"./index.f6ad53fc.js";import{u as na,a as ia}from"./useSize.36511d9e.js";import{e as oa}from"./eagerComputed.fb04c3da.js";var la=function(){return{prefixCls:String,shape:{type:String,default:"circle"},size:{type:[Number,String,Object],default:function(){return"default"}},src:String,srcset:String,icon:J.any,alt:String,gap:Number,draggable:{type:Boolean,default:void 0},crossOrigin:String,loadError:{type:Function}}},sa=H({name:"AAvatar",inheritAttrs:!1,props:la(),slots:["icon"],setup:function(a,b){var S=b.slots,i=b.attrs,d=_(!0),m=_(!1),x=_(1),o=_(null),h=_(null),w=B("avatar",a),p=w.prefixCls,A=na(),n=K(function(){return a.size==="default"?A.value:a.size}),O=Q(),v=oa(function(){if(U(a.size)==="object"){var t=Y.find(function(r){return O.value[r]}),e=a.size[t];return e}}),T=function(e){return v.value?{width:"".concat(v.value,"px"),height:"".concat(v.value,"px"),lineHeight:"".concat(v.value,"px"),fontSize:"".concat(e?v.value/2:18,"px")}:{}},u=function(){if(!(!o.value||!h.value)){var e=o.value.offsetWidth,r=h.value.offsetWidth;if(e!==0&&r!==0){var s=a.gap,P=s===void 0?4:s;P*2<r&&(x.value=r-P*2<e?(r-P*2)/e:1)}}},z=function(){var e=a.loadError,r=e==null?void 0:e();r!==!1&&(d.value=!1)};return R(function(){return a.src},function(){I(function(){d.value=!0,x.value=1})}),R(function(){return a.gap},function(){I(function(){u()})}),Z(function(){I(function(){u(),m.value=!0})}),function(){var t,e,r=a.shape,s=a.src,P=a.alt,F=a.srcset,L=a.draggable,M=a.crossOrigin,C=$(S,a,"icon"),f=p.value,q=(t={},l(t,"".concat(i.class),!!i.class),l(t,f,!0),l(t,"".concat(f,"-lg"),n.value==="large"),l(t,"".concat(f,"-sm"),n.value==="small"),l(t,"".concat(f,"-").concat(r),r),l(t,"".concat(f,"-image"),s&&d.value),l(t,"".concat(f,"-icon"),C),t),V=typeof n.value=="number"?{width:"".concat(n.value,"px"),height:"".concat(n.value,"px"),lineHeight:"".concat(n.value,"px"),fontSize:C?"".concat(n.value/2,"px"):"18px"}:{},W=(e=S.default)===null||e===void 0?void 0:e.call(S),k;if(s&&d.value)k=c("img",{draggable:L,src:s,srcset:F,onError:z,alt:P,crossorigin:M},null);else if(C)k=C;else if(m.value||x.value!==1){var E="scale(".concat(x.value,") translateX(-50%)"),X={msTransform:E,WebkitTransform:E,transform:E},D=typeof n.value=="number"?{lineHeight:"".concat(n.value,"px")}:{};k=c(aa,{onResize:u},{default:function(){return[c("span",{class:"".concat(f,"-string"),ref:o,style:G(G({},D),X)},[W])]}})}else k=c("span",{class:"".concat(f,"-string"),ref:o,style:{opacity:0}},[W]);return c("span",y(y({},i),{},{ref:h,class:q,style:[V,T(!!C),i.style]}),[k])}}}),j=sa,ca=function(){return{prefixCls:String,maxCount:Number,maxStyle:{type:Object,default:void 0},maxPopoverPlacement:{type:String,default:"top"},maxPopoverTrigger:String,size:{type:[Number,String,Object],default:"default"}}},va=H({name:"AAvatarGroup",inheritAttrs:!1,props:ca(),setup:function(a,b){var S=b.slots,i=b.attrs,d=B("avatar-group",a),m=d.prefixCls,x=d.direction;return ia(a),function(){var o,h=a.maxPopoverPlacement,w=h===void 0?"top":h,p=a.maxCount,A=a.maxStyle,n=a.maxPopoverTrigger,O=n===void 0?"hover":n,v=(o={},l(o,m.value,!0),l(o,"".concat(m.value,"-rtl"),x.value==="rtl"),l(o,"".concat(i.class),!!i.class),o),T=$(S,a),u=ta(T).map(function(r,s){return ea(r,{key:"avatar-key-".concat(s)})}),z=u.length;if(p&&p<z){var t=u.slice(0,p),e=u.slice(p,z);return t.push(c(ra,{key:"avatar-popover-key",content:e,trigger:O,placement:w,overlayClassName:"".concat(m.value,"-popover")},{default:function(){return[c(j,{style:A},{default:function(){return["+".concat(z-p)]}})]}})),c("div",y(y({},i),{},{class:v,style:i.style}),[t])}return c("div",y(y({},i),{},{class:v,style:i.style}),[u])}}}),N=va;j.Group=N;j.install=function(g){return g.component(j.name,j),g.component(N.name,N),g};export{j as A};
